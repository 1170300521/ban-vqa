<!doctype html>
<header>
    <title>BAN-VQA Demo</title>
    <link rel="stylesheet" type="text/css" href="static/{{ style }}.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        {% if is_query %}
        $(document).ready(function(){
            $('.chatbox ul').animate({
                scrollTop: $('.chatbox ul').prop("scrollHeight")-$('.chatbox ul').height()-154
            }, 0);
        });
        {% endif %}
        $(document).ready(function(){
            $('.chatbox ul').animate({
                scrollTop: $('.chatbox ul').prop("scrollHeight")
            }, 3000);
            $('.actbox input.refresh').click(function(){
                window.location.href = '/';
            });
            setInterval(function() {
               window.location.href = '/';
            }, {{ '300000' if is_query else '180000' }});  // auto-refresh: 3 min, init: 5 min
        });
    </script>
</header>
<body>
<div class="demo">
{% if imageid %}
    <div class="header">
        <img src="static/vqa_logo.png" style="height: 50px"/> <span class="text">2.0 test-{{ imageid }}</span><span class="title"> <img src="static/logo.png"/></span>
    </div>
    <div class="imgbox">
        <img src="{{ impath }}"/>
    </div>
    <div class="chatbox"> 
    <ul>
    {% for q in questions %}
        <li class="me">{{ q.question }}</li>
        <li class="him">{{ q.answer }}</li>
    {% endfor %}
    </ul>
    </div>
    <div class="actbox">
        <form action="/query" method="post">
            <div class="wrapper"><input type="text" name="question" autofocus/></div>
            <input type="button" value="Random" class="refresh"/>
            <input type="submit" value="Query"/>
        </form>
    </div>
{% else %}
    <h1>Embarrassingly empty!</h1>
{% endif %}
</div>
</body>
